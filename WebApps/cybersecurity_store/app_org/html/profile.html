<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodingDung | Profile Template</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="../css/collections-style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="../js/cookie.js"></script>
    <script src="../js/logOut.js"></script>
    <script src="../js/profile.js"></script>
    <script src="../js/tokenManager.js"></script><script> checkToken(); </script>
    <!--    <link rel="stylesheet" href="profile.css">  NÃO ERA SUPOSTO ESTAR ASSIM POIS NÃO?-->
    <link rel="stylesheet" href="../css/profile.css">   <!-- ALTERAÇÃO-->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>
    <!-- Page Loader -->
    <div id="loader-wrapper">
        <div id="loader"></div>
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="/perfil">
                <i class="fa-regular fa-user"></i>
                Perfil
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link nav-link-1" href="/collections">Produtos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-5" href="/cart/">Carrinho</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-3" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link nav-link-4 active" aria-current="page" href="/profile">Perfil</a>
                </li>
                <li class="nav-item">
                    <a style="cursor: pointer;" class="nav-link nav-link-2" onclick="logOut()">Log Out</a>
                </li>
            </ul>
            </div>
        </div>
    </nav>

    <div class="tm-hero d-flex justify-content-center align-items-center" data-parallax="scroll" data-image-src="../img/html/ua.jpg"></div>

    <div class="container light-style flex-grow-1 container-p-y">
        <h4 class="font-weight-bold py-3 mb-4" style="color: #3498db;">
            Perfil de utilizador
        </h4>
        <div class="card overflow-hidden">
            <div class="row no-gutters row-bordered row-border-light">
                <div class="col-md-3 pt-0">
                    <div class="list-group list-group-flush account-settings-links">
                        <a class="list-group-item list-group-item-action active" data-toggle="list"
                            href="#account-general">Geral</a>
                        <a class="list-group-item list-group-item-action" data-toggle="list"
                            href="#account-change-password">Mudar password</a>
                        <a class="list-group-item list-group-item-action"
                            href="/orderHistory">Historico de compras</a>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="tab-content">
                        <div class="tab-pane fade active show" id="account-general">
                            <div class="card-body media align-items-center">
                                <img id="avatar-image" src="AVATAR" alt style="height: auto; width: 200px;"
                                    class="d-block ui-w-80">
                                <div class="media-body ml-4">
                                    <form enctype="multipart/form-data" action="/profile/upload_avatar" method="post" onsubmit="return false;">

                                    <label class="btn btn-outline-primary">
                                        Mudar Avatar
                                        <input type="file" class="account-settings-fileinput" name="newAvatar" id="avatar-input">
                                    </label> &nbsp;
                                    <button onclick="uploadAvatar()">Upload Avatar</button>
                                    
                                    <div class="text-light small mt-1">Allowed JPG, GIF or PNG. Max size of 800K</div>
                                </form>
                                </div>
                            </div>
                            <hr class="border-light m-0">
                            <div class="card-body">
                                <div class="form-group">
                                    <label class="form-label">Nome</label>

                                    <div>
                                        <input id="USERNAME" class="form-control" >
                                    </div>
                                    <!-- ALTEREI ISTO-->
                                    <div class="text-right mt-3">
                                        <button type="button" onclick="change_username()" class="btn btn-primary">Salvar</button>&nbsp;
                                        <button type="button" class="btn btn-default">Cancelar</button>
                                    </div>
                                    <!--    -->
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="account-change-password">
                            <div class="card-body pb-2" id="PASSWORD"> 
                                <div class="form-group">
                                    <label class="form-label">Password atual</label>
                                    <input type="password" class="form-control" id="CURRENT_PASSWORD" value="" >
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Nova password</label>
                                    <input type="password" class="form-control" id="NEW_PASSWORD" value="" >
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Repetir nova password</label>
                                    <input type="password" class="form-control" id="CONFIRM_PASSWORD" value="">
                                </div> 
                                <!-- ALTEREI ISTO-->
                                <div class="text-right mt-3">
                                    <button type="button" onclick="change_password()" class="btn btn-primary">Salvar</button>&nbsp;
                                    <button type="button" class="btn btn-default">Cancelar</button>
                                </div>
                                <!-- -->
                                
                            </div>
                        </div>
                        <div class="tab-pane fade" id="account-connections">

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--
        <div class="text-right mt-3">
            <button type="button" onclick="change_username()" class="btn btn-primary">Salvar</button>&nbsp;
            <button type="button" class="btn btn-default">Cancelar</button>
        </div>
        -->
    </div>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">

    </script>

    <script src="../js/plugins.js"></script>
    <script>
        $(window).on("load", function() {
            $('body').addClass('loaded');
        });
    </script>
</body>
</html>
